<!DOCTYPE html>
<html ng-app="freeradius"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>FreeRADIUS &#39;man&#39; pages</title>
    <meta name="description" content="The world's leading RADIUS server. The project includes a GPL AAA server, BSD licensed client and PAM and Apache modules. Full support is available from NetworkRADIUS.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="freeradius.org/radiusd/man/rlm_sql.html">
    <link rel="alternate" type="application/rss+xml" title="FreeRADIUS" href="freeradius.org/feed.xml">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5 ">
    <meta name="msapplication-TileColor" content="#da532c ">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff ">

</head>
<body><div class="global-nav">
  <div class="global_links pull_right">
    <div class="global_link global_link_label h5 text">Our sites:</div>
    <a class="global_link h5" href="http://networkradius.com/"><div class=""><span class="text">Network</span>RADIUS</div></a>
    <a class="global_link h5 active" href="http://wiki.freeradius.org/"><div class=""><span class="text">Free</span>RADIUS <span class="text">Wiki</span></div></a>
  </div>
</div>

<header class="site-header" global-header ng-class="{fixed: fixNav}">
  <div class="site-header-wrapper">

    <a class="site-title" href="/"><img src="/img/wordmark.svg"></a>
    <button class="menu-icon" tab-trigger ng-click="toggle('#site-nav', true)">
      <svg viewBox="0 0 18 15">
        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
      </svg>
    </button>

    <nav class="site-nav" id="site-nav" tab-content ng-class="{active : active == '#site-nav'}">

      <div class="get-release">
      <a ng-cloak ng-href="/releases/" stable-download class="button bg_accent-blue h5">Download {{stableBranch.last_release.name}}</a>
      </div>

      <ul class="site-nav-list">

         <li class="site-nav-item">
            <a class="page-link h5" href="/releases/">Releases</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/documentation/">Documentation</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/modules/">Modules</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/community/">Community</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/about/">About</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/support/">Support</a>
         </li>

      </ul>

    </nav>
  </div>
</header>
<div class="page-content">

        <article class="post">
  <header class="post-header">
    <div class="post-hero hero-documentation">
      <div class="wrapper">
        <h1 class="post-title">FreeRADIUS 'man' pages</h1>
        <p class="post-subtitle">Documentation from the server</p>
      </div>
    </div>
  </header><div class="sub-nav">
    <div class="wrapper">
        <nav class="inline_nav" sub-nav>
            <ul>
                <li class="">
                    <a class="subnav_link" href="/radiusd/man/#programs">Programs</a>
                </li><li class="">
                    <a class="subnav_link" href="/radiusd/man/#files">Configuration Files</a>
                </li><li class="">
                    <a class="subnav_link" href="/radiusd/man/#modules">Modules</a>
                </li></ul>
        </nav>
    </div>
</div>
<div class="post-content">
    <div class="man_page wrapper base_padding_v">
<H1>rlm_sql</H1>
Section: FreeRADIUS Module (5)<BR>Updated: 5 February 2004<BR><A HREF="#index">Index</A>
<A HREF="/man/">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

rlm_sql - FreeRADIUS Module
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

The <I>rlm_sql</I> module provides an SQL interface to retrieve
authorization information and store accounting information.  It can be
used in conjunction with, or in lieu of the files and detail modules.
The SQL module has drivers to support the following SQL databases:
<P>


<DL COMPACT><DT><DD>
<PRE>

<BR>
     db2
<BR>
     mysql
<BR>
     oracle
<BR>
     postgresql
<BR>
     sybase
<BR>
     unixodbc
<BR>

</PRE>

</DL>

<P>

<P>

Due to the size of the configuration variables, the sql module is
usually configured in a separate file, which is included in the main
radiusd.conf via an include directive.
<P>

The main configuration items to be aware of are:
<DL COMPACT>
<DT>driver<DD>
This variable specifies the driver to be loaded.
<DT>server<DD>
<DT>login<DD>
<DT>password<DD>
These specify the servername, username, and password the module will
use to connect to the database.
<DT>radius_db<DD>
The name of the database where the radius tables are stored.
<DT>acct_table1<DD>
<DT>acct_table2<DD>
These specify the tables names for accounting records.  acct_table1
specifies the table where Start records are stored.  acct_table2
specifies the table where Stop records are stored.  In most cases,
this should be the same table.
<DT>postauth_table<DD>
The name of the table to store post-authentication data.
<DT>authcheck_table<DD>
<DT>authreply_table<DD>
The tables where individual Check-Items and Reply-Items are stored.
<DT>groupcheck_table<DD>
<DT>groupreply_table<DD>
The tables where group Check-Items and Reply-Items are stored.
<DT>usergroup_table<DD>
The table where username to group relationships are stored.
<DT>deletestatlesessions<DD>
This option is set to 'yes' or 'no'.  If you are doing
Simultaneous-Use checking, and this is set to yes, stale sessions (
defined as sessions for which a Stop record was not received ) will be
cleared.
<DT>logfile<DD>
This option is useful for debugging sql problems.  If logfile is set
then all sql queries for the containing section are written to the
file specified.  This is useful for debugging and bulk inserts.
<DT>num_sql_socks<DD>
The number of sql connections to make to the database.
<DT>connect_failure_retry_delay<DD>
The number of seconds to wait before attempting to reconnect to a
failed database connection.
<DT>sql_user_name<DD>
This is the definition of the SQL-User-Name attribute.  This is set
once, so that you can use &percnt;{SQL-User-Name} in the SQL queries, rather
than the nested username substitution.  This ensures that Username is
parsed consistently for all SQL queries executed.  (However, note that
SQL-User-Name is not set when processing sql xlats.)
<DT>default_user_profile<DD>
This is the default profile name that will be applied to all users if
set.  This is not set by default.
<DT>query_on_not_found<DD>
This option is set to 'yes' or 'no'.  If set to yes, then the default
user profile is returned if no specific match was found for the user.
<DT>authorize_check_query<DD>
<DT>authorize_reply_query<DD>
These queries are run during the authorization stage to extract the
user authorization information from the ${authcheck_table} and
${authreply_table}.
<DT>authorize_group_check_query<DD>
<DT>authorize_group_reply_query<DD>
These queries are run during the authorization stage to extract the
group authorization information from the ${groupcheck_table} and
${groupreply_table}.
<DT>accounting_onoff_query<DD>
The query to be run when receiving an Accounting On or Accounting Off
packet.
<DT>accounting_update_query<DD>
<DT>accounting_update_query_alt<DD>
The query to be run when receiving an Accounting Update packet.  If the
primary query fails, the alt query is run.
<DT>accounting_start_query<DD>
<DT>accounting_start_query_alt<DD>
The query to be run when receiving an Accounting Start packet.  If the
primary query fails, the alt query is run.
<DT>accounting_stop_query<DD>
<DT>accounting_stop_query_alt<DD>
The query to be run when receiving an Accounting Stop packet.  If the
primary query fails, the alt query is run.
<DT>simul_count_query<DD>
The query to be run to return the number simultaneous sessions for the
purposes of limiting Simultaneous Use.
<DT>simul_verify_query<DD>
The query to return the detail information needed to confirm that all
suspected connected sessions are valid, and are not stale sessions.
<DT>group_membership_query<DD>
The query to run to check user group membership.
<DT>postauth_query<DD>
The query to run during the post-authentication stage.
</DL>
<A NAME="lbAD">&nbsp;</A>
<H2>CONFIGURATION</H2>

<P>

Due to the size of the configuration for this module, it is not
included in this manual page.  Please review the supplied
configuration files for example queries and configuration details.
<A NAME="lbAE">&nbsp;</A>
<H2>SECTIONS</H2>

<B>authorization,</B>

<B>accounting,</B>

<B>checksimul,</B>

<B>post-authentication</B>

<P>

<A NAME="lbAF">&nbsp;</A>
<H2>FILES</H2>

<I>/etc/raddb/radiusd.conf,</I>

<I>/etc/raddb/sql.conf,</I>

<I>/etc/raddb/sql/&lt;DB&gt;/dialup.conf,</I>

<I>/etc/raddb/sql/&lt;DB&gt;/schema.sql,</I>


<P>

<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><a href="radiusd.html">radiusd</A></B>(8),

<B><a href="radiusd.conf.html">radiusd.conf</A></B>(5),

<A NAME="lbAH">&nbsp;</A>
<H2>AUTHORS</H2>

Chris Parker, <A HREF="mailto:cparker@segv.org">cparker@segv.org</A>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DT><A HREF="#lbAD">CONFIGURATION</A><DD>
<DT><A HREF="#lbAE">SECTIONS</A><DD>
<DT><A HREF="#lbAF">FILES</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">AUTHORS</A><DD>
</DL>
<HR>
This document was created by
man2html,
using the manual pages.<BR>
Time: 13:47:04 GMT, August 08, 2017
</div>
</HTML>

  </div>

</article>


    </div><footer class="global_footer bg_block-dark lg_padding_v">

    <div class="wrapper">
        <div class="row">
            <div class="columns medium-4">
                <div class="footer_main">
                    <img class="footer_logo" width="150" src="../img/wordmark-white.svg" alt="">
                    <a ng-cloak ng-href="/releases/" stable-download class="button bg_accent-green h5">Download {{stableBranch.last_release.name}}</a>
                    <div class="footer-social">
                        <a href="https://github.com/FreeRADIUS"><img class="icon_small" src="/img/github-white.svg" alt=""></a>
                         <a href="https://twitter.com/freeradius"><img class="icon_small" src="/img/twitter-white.svg" alt=""></a>
                        <a href="http://stackoverflow.com/tags/freeradius/info"><img class="icon_small" src="/img/stackoverflow-white.svg" alt=""></a>
                    </div>
                    <p>&copy; 2017 The FreeRADIUS Server Project Support and Contributors</p>
                </div>
            </div>
            <div class="columns medium-8">
                <nav class="footer_nav h6 row small-up-2">
                    <ul>
                        <li><a href="/documentation/">Docs</a></li>
                        <li><a href="http://wiki.freeradius.org/Home">Wiki</a></li>
                        <li><a href="http://freeradius.org/radiusd/man/">Manual Pages</a></li>
                        <li><a href="http://deployingradius.com/">Useful How-To's</a></li>
                        <li><a href="http://networkradius.com/doc.html">Full Server Docs</a></li>
                        <li><a href="http://doc.freeradius.org/">Api Docs</a></li>
                    </ul>
                    <ul>
                        <li><a href="/modules/">Modules</a></li>
                        <li><a href="/modules/">Packages</a></li>
                        <li><a href="https://github.com/FreeRADIUS/freeradius-server/issues/new">Report A Bug</a></li>
                    </ul>
                    <ul>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="/support/">Mailing Lists</a></li>
                        <li><a href="/community/#contributing">Contribute</a></li>
                        <li><a href="/community/#developer_docs">Developer Docs</a></li>
                    </ul>
                    <ul>
                        <li><a href="/about/">About</a></li>
                        <li><a href="/about/#project">The Project</a></li>
                        <li><a href="/about/#usage_statistics">Why We're No. 1</a></li>
                        <li><a href="/about/#security">Security</a></li>
                        <li><a href="/about/#team">Team</a></li>
                    </ul>
                    <ul>
                        <li><a href="/support/">Support</a></li>
                        <li><a href="https://github.com/FreeRADIUS/freeradius-server/issues/new">Issue Tracker</a></li>
                        <li><a href="/security/">Security Issues</a></li>
                        <li><a href="http://stackoverflow.com/questions/tagged/freeradius">FAQs</a></li>
                        <li><a href="/support/">Newsletters</a></li>
                        <li><a href="/commercial_support/">Commercial</a></li>
                        <li><a href="/support/">Support</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-1.12.1.min.js"><\/script>')</script>
<script src="/js/angular.min.js"></script>
<script src="/js/app.js"></script>
</body>

</html>
