<!DOCTYPE html>
<html ng-app="freeradius"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>FreeRADIUS &#39;man&#39; pages</title>
    <meta name="description" content="The world's leading RADIUS server. The project includes a GPL AAA server, BSD licensed client and PAM and Apache modules. Full support is available from NetworkRADIUS.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="freeradius.org/radiusd/man/radrelay.conf.html">
    <link rel="alternate" type="application/rss+xml" title="FreeRADIUS" href="freeradius.org/feed.xml">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5 ">
    <meta name="msapplication-TileColor" content="#da532c ">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff ">

</head>
<body><div class="global-nav">
  <div class="global_links pull_right">
    <div class="global_link global_link_label h5 text">Our sites:</div>
    <a class="global_link h5" href="http://networkradius.com/"><div class=""><span class="text">Network</span>RADIUS</div></a>
    <a class="global_link h5 active" href="http://wiki.freeradius.org/"><div class=""><span class="text">Free</span>RADIUS <span class="text">Wiki</span></div></a>
  </div>
</div>

<header class="site-header" global-header ng-class="{fixed: fixNav}">
  <div class="site-header-wrapper">

    <a class="site-title" href="/"><img src="/img/wordmark.svg"></a>
    <button class="menu-icon" tab-trigger ng-click="toggle('#site-nav', true)">
      <svg viewBox="0 0 18 15">
        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
      </svg>
    </button>

    <nav class="site-nav" id="site-nav" tab-content ng-class="{active : active == '#site-nav'}">

      <div class="get-release">
      <a ng-cloak ng-href="/releases/" stable-download class="button bg_accent-blue h5">Download {{stableBranch.last_release.name}}</a>
      </div>

      <ul class="site-nav-list">

         <li class="site-nav-item">
            <a class="page-link h5" href="/releases/">Releases</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/documentation/">Documentation</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/modules/">Modules</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/community/">Community</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/about/">About</a>
         </li>

         <li class="site-nav-item">
            <a class="page-link h5" href="/support/">Support</a>
         </li>

      </ul>

    </nav>
  </div>
</header>
<div class="page-content">

        <article class="post">
  <header class="post-header">
    <div class="post-hero hero-documentation">
      <div class="wrapper">
        <h1 class="post-title">FreeRADIUS 'man' pages</h1>
        <p class="post-subtitle">Documentation from the server</p>
      </div>
    </div>
  </header><div class="sub-nav">
    <div class="wrapper">
        <nav class="inline_nav" sub-nav>
            <ul>
                <li class="">
                    <a class="subnav_link" href="/radiusd/man/#programs">Programs</a>
                </li><li class="">
                    <a class="subnav_link" href="/radiusd/man/#files">Configuration Files</a>
                </li><li class="">
                    <a class="subnav_link" href="/radiusd/man/#modules">Modules</a>
                </li></ul>
        </nav>
    </div>
</div>
<div class="post-content">
    <div class="man_page wrapper base_padding_v">
<H1>radrelay.conf</H1>
Section: FreeRADIUS configuration file (5)<BR>Updated: 27 May 2005<BR><A HREF="#index">Index</A>
<A HREF="/man/">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

radrelay.conf - configuration file for the FreeRADIUS server &quot;radrelay&quot; personality
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

The <B>radrelay.conf</B> file resides in the radius database directory,
by default <B>/etc/raddb</B>.  It defines the global configuration for
the FreeRADIUS server, when the server is operating as &quot;radrelay&quot;.
<A NAME="lbAD">&nbsp;</A>
<H2>FILE FORMAT</H2>

For a detailed description of the file format, see &quot;man radiusd.conf&quot;.
The configuration entries are much the same for radrelay.conf, with a
few differences as noted here.
<A NAME="lbAE">&nbsp;</A>
<H2>REPLICATION FOR BACKUPS</H2>

Many sites run multiple radius servers; at least one primary and one
backup server. When the primary goes down, most NASes detect that and
switch to the backup server.
<P>
That will cause your accounting packets to go the the backup server -
and some NASes don't even switch back to the primary server when it
comes back up.
<P>
The result is that accounting records are missed, and/or the
administrator must jump through hoops in order to combine the
different detail files from multiple servers. It also means that the
session database (&quot;radutmp&quot;, used for radwho and simultaneous use
detection) gets out of sync.
<P>
radrelay solves this issue by &quot;relaying&quot; packets from one server to
another, so they both have the same set of accounting data.
<A NAME="lbAF">&nbsp;</A>
<H2>BUFFERING FOR HIGH-LOAD SERVERS</H2>

If the RADIUS server suddenly receives a many accounting packets,
there may be insufficient CPU power to process them all in a timely
manner.  This problem is especially noticeable when the accounting
packets are going to a back-end database.
<P>
Similarly, you may have one database that tracks &quot;live&quot; sessions, and
another that tracks historical accounting data.  In that case,
accessing the first database is fast, as it is small.  Accessing the
second database many be slower, as it may contain multiple gigabytes
of data.  In addition, writing to the first database in a timely
manner is important, while data may be written to the second database
with a few minutes delay, without any harm being done.
<A NAME="lbAG">&nbsp;</A>
<H2>RELAYING OF ACCOUNTING PACKETS</H2>

The <B>radrelay.conf</B> file controls the &quot;radrelay&quot; personality of
the server, which can perform both of the functions above at the same
time.
<A NAME="lbAH">&nbsp;</A>
<H2>USAGE</H2>

First, you should configure the main radius server to log to an extra,
single detail file.  This may be done by adding an extra instance of
the detail module to <B>radiusd.conf</B>:
<P>
For example:
<P>

<DL COMPACT><DT><DD>
<PRE>

        detail radrelay-detail {
<BR>
                filename = ${radacctdir}/radrelay/detail
<BR>
                permissions = 0600
<BR>
                dir_permissions = 0755
<BR>
                locking = yes
<BR>
        }
<BR>
        ...
<BR>
        process Accounting-Request {
<BR>
                ...
<BR>
                radrelay-detail
<BR>
                ...
<BR>
        }
<BR>

</PRE>

</DL>

<P>

This configuration will cause accounting packets to be logged to the
<I>${radacctdir}/radrelay/detail</I> file.  This file should not be
rotated by standard log rotation scripts, as the <B>radrelay</B>
program will read and rotate it.
<A NAME="lbAI">&nbsp;</A>
<H2>RADRELAY.CONF EXAMPLE</H2>

See the <B>radrelay.conf</B> file for detailed instructions on
configuration entries, what they mean, and how to use them.
<P>
To have the &quot;radrelay&quot; portion of the server read the above detail
file, configure <B>radrelay.conf</B> with the following section:
<P>

<DL COMPACT><DT><DD>
<PRE>

<BR>
        listen {
<BR>
                type = detail
<BR>
                filename = ${radacctdir}/radrelay/detail
<BR>
                max_outstanding = 100
<BR>
                identity = radrelay
<BR>
        }
<BR>

</PRE>

</DL>

<P>

<P>
The server will read the accounting packets from the detail file, and
process them just as if it had received them from the NAS.  Therefore,
you should configure the &quot;accounting&quot; section of <B>radrelay.conf</B>
to write the accounting records to an &quot;sql&quot; module, or to proxy them
to another RADIUS server.
<P>
Then, start the server via the following command:
<P>
$ radiusd -n radrelay
<P>
The server should start up, read the detail file, and process
accounting packets from it.
<A NAME="lbAJ">&nbsp;</A>
<H2>NOTES</H2>

The <B>radiusd.conf</B> file is not read at all when the server is
running as radrelay.  Please edit <B>radrelay.conf</B>.
<A NAME="lbAK">&nbsp;</A>
<H2>CREDITS</H2>

The original &quot;radrelay&quot; program was written by Miquel van Smoorenburg
for the Cistron radius project, and ported to FreeRADIUS by Simon
Ekstrand.  The &quot;radsqlrelay&quot; was written by Kostas Kalavras.  It was
never released as part of an official FreeRADIUS release, but served as
a basis for the design of this implementation.
<P>

<A NAME="lbAL">&nbsp;</A>
<H2>FILES</H2>

/etc/raddb/radrelay.conf
<A NAME="lbAM">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><a href="radiusd.html">radiusd</A></B>(8),

<B><a href="radiusd.conf.html">radiusd.conf</A></B>(5)

<A NAME="lbAN">&nbsp;</A>
<H2>AUTHOR</H2>

Alan DeKok &lt;<A HREF="mailto:aland@ox.org">aland@ox.org</A>&gt;
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DT><A HREF="#lbAD">FILE FORMAT</A><DD>
<DT><A HREF="#lbAE">REPLICATION FOR BACKUPS</A><DD>
<DT><A HREF="#lbAF">BUFFERING FOR HIGH-LOAD SERVERS</A><DD>
<DT><A HREF="#lbAG">RELAYING OF ACCOUNTING PACKETS</A><DD>
<DT><A HREF="#lbAH">USAGE</A><DD>
<DT><A HREF="#lbAI">RADRELAY.CONF EXAMPLE</A><DD>
<DT><A HREF="#lbAJ">NOTES</A><DD>
<DT><A HREF="#lbAK">CREDITS</A><DD>
<DT><A HREF="#lbAL">FILES</A><DD>
<DT><A HREF="#lbAM">SEE ALSO</A><DD>
<DT><A HREF="#lbAN">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
man2html,
using the manual pages.<BR>
Time: 17:42:29 GMT, January 17, 2018
</div>
</HTML>

  </div>

</article>


    </div><footer class="global_footer bg_block-dark lg_padding_v">

    <div class="wrapper">
        <div class="row">
            <div class="columns medium-4">
                <div class="footer_main">
                    <img class="footer_logo" width="150" src="/img/wordmark-white.svg" alt="">
                    <a ng-cloak ng-href="/releases/" stable-download class="button bg_accent-green h5">Download {{stableBranch.last_release.name}}</a>
                    <div class="footer-social">
                        <a href="https://github.com/FreeRADIUS"><img class="icon_small" src="/img/github-white.svg" alt=""></a>
                         <a href="https://twitter.com/freeradius"><img class="icon_small" src="/img/twitter-white.svg" alt=""></a>
                        <a href="http://stackoverflow.com/tags/freeradius/info"><img class="icon_small" src="/img/stackoverflow-white.svg" alt=""></a>
                    </div>
                    <p>&copy; 2017 The FreeRADIUS Server Project and Contributors</p>
                </div>
            </div>
            <div class="columns medium-8">
                <nav class="footer_nav h6 row small-up-2">
                    <ul>
                        <li><a href="/documentation/">Docs</a></li>
                        <li><a href="http://wiki.freeradius.org/Home">Wiki</a></li>
                        <li><a href="http://freeradius.org/radiusd/man/">Manual Pages</a></li>
                        <li><a href="http://deployingradius.com/">Useful How-To's</a></li>
                        <li><a href="http://networkradius.com/doc.html">Full Server Docs</a></li>
                        <li><a href="http://doc.freeradius.org/">Api Docs</a></li>
                    </ul>
                    <ul>
                        <li><a href="/modules/">Modules</a></li>
                        <li><a href="/modules/">Packages</a></li>
                        <li><a href="https://github.com/FreeRADIUS/freeradius-server/issues/new">Report A Bug</a></li>
                    </ul>
                    <ul>
                        <li><a href="/community/">Community</a></li>
                        <li><a href="/support/">Mailing Lists</a></li>
                        <li><a href="/community/#contributing">Contribute</a></li>
                        <li><a href="/community/#developer_docs">Developer Docs</a></li>
                    </ul>
                    <ul>
                        <li><a href="/about/">About</a></li>
                        <li><a href="/about/#project">The Project</a></li>
                        <li><a href="/about/#usage_statistics">Why We're No. 1</a></li>
                        <li><a href="/about/#security">Security</a></li>
                        <li><a href="/about/#team">Team</a></li>
                    </ul>
                    <ul>
                        <li><a href="/support/">Support</a></li>
                        <li><a href="https://github.com/FreeRADIUS/freeradius-server/issues/new">Issue Tracker</a></li>
                        <li><a href="/security/">Security Issues</a></li>
                        <li><a href="http://stackoverflow.com/questions/tagged/freeradius">FAQs</a></li>
                        <li><a href="/support/">Newsletters</a></li>
                        <li><a href="/commercial_support/">Commercial</a></li>
                        <li><a href="/support/">Support</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-1.12.1.min.js"><\/script>')</script>
<script src="/js/angular.min.js"></script>
<script src="/js/app.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-1186926-1', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>
