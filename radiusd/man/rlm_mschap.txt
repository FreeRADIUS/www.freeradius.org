rlm_mschap(5)                  FreeRADIUS Module                 rlm_mschap(5)



NNAAMMEE
       rlm_mschap - FreeRADIUS Module

DDEESSCCRRIIPPTTIIOONN
       The  _r_l_m___m_s_c_h_a_p  module  provides  MS-CHAP and MS-CHAPv2 authentication
       support.

       This module validates a user with MS-CHAP or MS-CHAPv2  authentication.
       It  should  be  listed in both the _a_u_t_h_o_r_i_z_e and _a_u_t_h_e_n_t_i_c_a_t_e sections.
       In _a_u_t_h_o_r_i_z_e, it will look for MS-CHAP Challenge/Response attributes in
       the Acess-Request, and configure itself to be the module called for the
       _a_u_t_h_e_n_t_i_c_a_t_e section.

       The module can authenticate the MS-CHAP session  via  plain-text  pass‐
       words   (User-Password   attribute),   or   NT  passwords  (NT-Password
       attribute).  The module can perform authentication against an NT domain
       by using the _n_t_l_m___a_u_t_h program.

SSMMBB IInntteeggrraattiioonn
       The module also enforces the SMB-Account-Ctrl attribute.  See the Samba
       documentation for the meaning of SMB account control.  The module  does
       not  read  Samba password files.  Instead, the _r_l_m___p_a_s_s_w_d module should
       be used to read a Samba password file, and  to  supply  an  NT-Password
       attribute  which  this module can use.  See the _e_t_c___s_m_b_p_a_s_s_w_d module in
       _r_a_d_i_u_s_d_._c_o_n_f for more details.

MMOODDUULLEE CCOONNFFIIGGUURRAATTIIOONN
       The main configuration items to be aware of are:

       use_mppe
              Unless this is set to ’no’, FreeRADIUS  will  add  MS-CHAP-MPPE-
              Keys for MS-CHAPv1 and MS-MPPE-Recv-Key/MS-MPPE-Send-Key for MS-
              CHAPv2.  The default is ’yes’.

       require_encryption
              If MPPE is enabled, setting this attribute to ’yes’  will  cause
              the  MS-MPPE-Encryption-Policy  attribute  to  be set to require
              encryption.  The default is ’no’.

       require_strong
              If MPPE is enabled, setting this attribute to ’yes’  will  cause
              the  MS-MPPE-Encryption-Types  attribute  to be set to require a
              128 bit key.  The default is ’no’.

       with_ntdomain_hack
              Windows clients send User-Name in the form of "DOMAIN\User", but
              send  the  challenge/response  based  only  on the User portion.
              Setting this value to yes, enables a work-around for this error.
              The default is ’no’.

       ntlm_auth
              Use the _n_t_l_m___a_u_t_h program for authentication against Samba, or a
              Windows NT or Active Directory Domain Controller.   For  machine
              authentication,  the  following  configuration  should  be used:
              ntlm_auth   =   "/path/to/ntlm_auth    --username=%{mschap:User-
              Name:-None}       --challenge=%{mschap:Challenge:-00}      --nt-
              response=%{mschap:NT-Response:-00}         --domain=%{mschap:NT-
              Domain:-YOUR_DEFAULT_DOMAIN}   If   configured,  _n_t_l_m___a_u_t_h  will
              always be called, even if there is a clear-text  or  NT-Password
              available  for the user.  You can force _n_t_l_m___a_u_t_h to not be used
              by setting MS-CHAP-Use-NTLM-Auth := No in the _u_s_e_r_s file, or  in
              a database such as SQL.


SSEECCTTIIOONNSS
       aauutthhoorriizzaattiioonn,, aauutthheennttiiccaattiioonn


FFIILLEESS
       _/_e_t_c_/_r_a_d_d_b_/_r_a_d_i_u_s_d_._c_o_n_f


SSEEEE AALLSSOO
       rraaddiiuussdd(8), rraaddiiuussdd..ccoonnff(5)

AAUUTTHHOORR
       Chris Parker, cparker@segv.org




                                  19 May 2006                    rlm_mschap(5)
